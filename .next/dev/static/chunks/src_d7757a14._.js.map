{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/digest/digest-module.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAuth } from '@/components/layout/auth-provider';\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\ntype ApiEnvelope<T> = {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: { code: string; message: string };\r\n};\r\n\r\nasync function apiCall<T>(path: string): Promise<T> {\r\n  const response = await fetch(path);\r\n  const json = (await response.json()) as ApiEnvelope<T>;\r\n  if (!json.success) {\r\n    throw new Error(json.error?.message || 'Request failed');\r\n  }\r\n  return json.data as T;\r\n}\r\n\r\nexport function DigestModule() {\r\n  const { farmId } = useAuth();\r\n  const digestQuery = useQuery({\r\n    queryKey: ['weekly-digest', farmId],\r\n    queryFn: () => apiCall<any>(`/api/farms/${farmId}/weekly-digest`),\r\n    enabled: Boolean(farmId),\r\n  });\r\n\r\n  const digest = digestQuery.data;\r\n\r\n  return (\r\n    <div className=\"p-4 md:p-6 max-w-6xl mx-auto w-full space-y-6 pb-24 md:pb-8\">\r\n      <header>\r\n        <h1 className=\"text-2xl font-bold tracking-tight\">Weekly Digest</h1>\r\n        <p className=\"text-xs text-muted-foreground uppercase font-semibold\">Owner exception center</p>\r\n      </header>\r\n\r\n      <section className=\"grid grid-cols-2 gap-3\">\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-[10px] uppercase text-muted-foreground\">Events</p>\r\n          <p className=\"text-2xl font-black\">{digest?.totals?.events ?? 0}</p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-[10px] uppercase text-muted-foreground\">Open Alerts</p>\r\n          <p className=\"text-2xl font-black\">{digest?.totals?.unresolvedAlerts ?? 0}</p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-[10px] uppercase text-muted-foreground\">Open POs</p>\r\n          <p className=\"text-2xl font-black\">{digest?.totals?.openPurchaseOrders ?? 0}</p>\r\n        </div>\r\n        <div className=\"p-4 rounded-xl border bg-card\">\r\n          <p className=\"text-[10px] uppercase text-muted-foreground\">Pending Payroll</p>\r\n          <p className=\"text-2xl font-black\">{digest?.totals?.pendingPayrollRuns ?? 0}</p>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"p-4 border rounded-xl bg-card\">\r\n        <h2 className=\"text-sm font-bold uppercase mb-3\">Event Trends</h2>\r\n        <div className=\"space-y-2\">\r\n          {digest?.byType ? Object.entries(digest.byType).map(([type, count]) => (\r\n            <div key={type} className=\"flex justify-between text-sm bg-accent/20 rounded-md px-3 py-2\">\r\n              <span className=\"font-medium\">{type}</span>\r\n              <span className=\"font-bold\">{String(count)}</span>\r\n            </div>\r\n          )) : <p className=\"text-xs text-muted-foreground\">No trend data yet.</p>}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["apiCall","path","response","fetch","json","success","Error","error","message","data","DigestModule","farmId","digestQuery","queryKey","queryFn","enabled","Boolean","digest","className","totals","events","unresolvedAlerts","openPurchaseOrders","pendingPayrollRuns","byType","Object","entries","map","type","count","String"],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAWA,eAAeA,QAAWC,IAAY;IACpC,MAAMC,WAAW,MAAMC,MAAMF;IAC7B,MAAMG,OAAQ,MAAMF,SAASE,IAAI;IACjC,IAAI,CAACA,KAAKC,OAAO,EAAE;QACjB,MAAM,IAAIC,MAAMF,KAAKG,KAAK,EAAEC,WAAW;IACzC;IACA,OAAOJ,KAAKK,IAAI;AAClB;AAEO,SAASC;;IACd,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,8JAAO;IAC1B,MAAMC,cAAc,IAAA,0LAAQ,EAAC;QAC3BC,UAAU;YAAC;YAAiBF;SAAO;QACnCG,OAAO;kDAAE,IAAMd,QAAa,CAAC,WAAW,EAAEW,OAAO,cAAc,CAAC;;QAChEI,SAASC,QAAQL;IACnB;IAEA,MAAMM,SAASL,YAAYH,IAAI;IAE/B,qBACE,6LAAC;QAAIS,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAGA,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAEA,WAAU;kCAAwD;;;;;;;;;;;;0BAGvE,6LAAC;gBAAQA,WAAU;;kCACjB,6LAAC;wBAAIA,WAAU;;0CACb,6LAAC;gCAAEA,WAAU;0CAA8C;;;;;;0CAC3D,6LAAC;gCAAEA,WAAU;0CAAuBD,QAAQE,QAAQC,UAAU;;;;;;;;;;;;kCAEhE,6LAAC;wBAAIF,WAAU;;0CACb,6LAAC;gCAAEA,WAAU;0CAA8C;;;;;;0CAC3D,6LAAC;gCAAEA,WAAU;0CAAuBD,QAAQE,QAAQE,oBAAoB;;;;;;;;;;;;kCAE1E,6LAAC;wBAAIH,WAAU;;0CACb,6LAAC;gCAAEA,WAAU;0CAA8C;;;;;;0CAC3D,6LAAC;gCAAEA,WAAU;0CAAuBD,QAAQE,QAAQG,sBAAsB;;;;;;;;;;;;kCAE5E,6LAAC;wBAAIJ,WAAU;;0CACb,6LAAC;gCAAEA,WAAU;0CAA8C;;;;;;0CAC3D,6LAAC;gCAAEA,WAAU;0CAAuBD,QAAQE,QAAQI,sBAAsB;;;;;;;;;;;;;;;;;;0BAI9E,6LAAC;gBAAQL,WAAU;;kCACjB,6LAAC;wBAAGA,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBAAIA,WAAU;kCACZD,QAAQO,SAASC,OAAOC,OAAO,CAACT,OAAOO,MAAM,EAAEG,GAAG,CAAC,CAAC,CAACC,MAAMC,MAAM,iBAChE,6LAAC;gCAAeX,WAAU;;kDACxB,6LAAC;wCAAKA,WAAU;kDAAeU;;;;;;kDAC/B,6LAAC;wCAAKV,WAAU;kDAAaY,OAAOD;;;;;;;+BAF5BD;;;;sDAIP,6LAAC;4BAAEV,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;;;;;;AAK5D;GAjDgBR;;QACK,8JAAO;QACN,0LAAQ;;;KAFdA"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/app/%28dashboard%29/digest/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { DigestModule } from '@/components/features/digest/digest-module';\r\n\r\nexport default function DigestPage() {\r\n  return <DigestModule />;\r\n}\r\n"],"names":["DigestPage"],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAASA;IACtB,qBAAO,6LAAC,+KAAY;;;;;AACtB;KAFwBA"}}]
}