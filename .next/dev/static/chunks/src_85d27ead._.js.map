{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/offline/db.ts"],"sourcesContent":["import Dexie, { type Table } from 'dexie';\r\n\r\nexport interface LocalEvent {\r\n    id?: number;\r\n    type: string;\r\n    payload: any;\r\n    timestamp: number;\r\n    synced: 0 | 1;\r\n    farmId: string;\r\n}\r\n\r\nexport interface OutboxJob {\r\n    id?: number;\r\n    action: string;\r\n    data: any;\r\n    priority: number;\r\n    attempts: number;\r\n    nextAttemptAt: number;\r\n    lastError?: string;\r\n    farmId: string;\r\n    status: 'PENDING' | 'FAILED' | 'PROCESSED';\r\n}\r\n\r\nexport interface LocalTask {\r\n    id: string; // Server ID\r\n    farmId: string;\r\n    title: string;\r\n    description?: string;\r\n    status: string;\r\n    dueDate?: string;\r\n    assigneeId?: string;\r\n    templateId?: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface LocalMedia {\r\n    id: string; // Internal blob ID or reference\r\n    farmId: string;\r\n    blob: Blob;\r\n    type: string;\r\n    metadata: any;\r\n    uploaded: 0 | 1;\r\n}\r\n\r\nexport interface SyncMeta {\r\n    key: string; // e.g., 'tasks_cursor'\r\n    farmId: string;\r\n    value: string;\r\n    updatedAt: number;\r\n}\r\n\r\nexport class FarmDB extends Dexie {\r\n    local_events!: Table<LocalEvent>;\r\n    outbox_jobs!: Table<OutboxJob>;\r\n    local_tasks!: Table<LocalTask>;\r\n    local_media!: Table<LocalMedia>;\r\n    sync_meta!: Table<SyncMeta>;\r\n\r\n    constructor() {\r\n        super('FarmDB');\r\n        this.version(1).stores({\r\n            local_events: '++id, type, farmId, synced, timestamp',\r\n            outbox_jobs: '++id, action, farmId, status, nextAttemptAt',\r\n            local_tasks: 'id, farmId, status, assigneeId, dueDate',\r\n            local_media: 'id, farmId, uploaded',\r\n            sync_meta: '[key+farmId]',\r\n        });\r\n    }\r\n}\r\n\r\nexport const db = new FarmDB();\r\n"],"names":["FarmDB","local_events","outbox_jobs","local_tasks","local_media","sync_meta","version","stores","db"],"mappings":";;;;;;AAAA;;AAmDO,MAAMA,eAAe,yJAAK;IAC7BC,aAAiC;IACjCC,YAA+B;IAC/BC,YAA+B;IAC/BC,YAAgC;IAChCC,UAA4B;IAE5BL,aAAc;QACV,KAAK,CAAC;QACN,IAAI,CAACM,OAAO,CAAC,GAAGC,MAAM,CAAC;YACnBN,cAAc;YACdC,aAAa;YACbC,aAAa;YACbC,aAAa;YACbC,WAAW;QACf;IACJ;AACJ;AAEO,MAAMG,KAAK,IAAIR"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/services/task/task-client.ts"],"sourcesContent":["import { db, type LocalTask } from '@/lib/offline/db';\r\nimport { useAuth } from '@/components/layout/auth-provider';\r\n\r\nexport function useTaskClient() {\r\n    const { farmId } = useAuth();\r\n\r\n    const getTasks = async () => {\r\n        if (!farmId) return [];\r\n        return db.local_tasks.where('farmId').equals(farmId).toArray();\r\n    };\r\n\r\n    const createTask = async (task: Omit<LocalTask, 'id' | 'farmId' | 'updatedAt'>) => {\r\n        if (!farmId) return;\r\n\r\n        const id = `local_${Date.now()}`;\r\n        const newTask: LocalTask = {\r\n            ...task,\r\n            id,\r\n            farmId,\r\n            updatedAt: new Date().toISOString(),\r\n        };\r\n\r\n        await db.local_tasks.add(newTask);\r\n\r\n        // Queue job for sync\r\n        await db.outbox_jobs.add({\r\n            action: 'TASK_CREATE',\r\n            data: newTask,\r\n            priority: 1,\r\n            attempts: 0,\r\n            nextAttemptAt: Date.now(),\r\n            farmId,\r\n            status: 'PENDING',\r\n        });\r\n\r\n        return newTask;\r\n    };\r\n\r\n    const updateTask = async (id: string, updates: Partial<LocalTask>) => {\r\n        if (!farmId) return;\r\n\r\n        await db.local_tasks.update(id, {\r\n            ...updates,\r\n            updatedAt: new Date().toISOString(),\r\n        });\r\n\r\n        await db.outbox_jobs.add({\r\n            action: 'TASK_UPDATE',\r\n            data: { id, ...updates },\r\n            priority: 1,\r\n            attempts: 0,\r\n            nextAttemptAt: Date.now(),\r\n            farmId,\r\n            status: 'PENDING',\r\n        });\r\n    };\r\n\r\n    return { getTasks, createTask, updateTask };\r\n}\r\n"],"names":["useTaskClient","farmId","getTasks","local_tasks","where","equals","toArray","createTask","task","id","Date","now","newTask","updatedAt","toISOString","add","outbox_jobs","action","data","priority","attempts","nextAttemptAt","status","updateTask","updates","update"],"mappings":";;;;AAAA;AACA;;;;AAEO,SAASA;;IACZ,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,8JAAO;IAE1B,MAAMC,WAAW;QACb,IAAI,CAACD,QAAQ,OAAO,EAAE;QACtB,OAAO,oIAAE,CAACE,WAAW,CAACC,KAAK,CAAC,UAAUC,MAAM,CAACJ,QAAQK,OAAO;IAChE;IAEA,MAAMC,aAAa,OAAOC;QACtB,IAAI,CAACP,QAAQ;QAEb,MAAMQ,KAAK,CAAC,MAAM,EAAEC,KAAKC,GAAG,IAAI;QAChC,MAAMC,UAAqB;YACvB,GAAGJ,IAAI;YACPC;YACAR;YACAY,WAAW,IAAIH,OAAOI,WAAW;QACrC;QAEA,MAAM,oIAAE,CAACX,WAAW,CAACY,GAAG,CAACH;QAEzB,qBAAqB;QACrB,MAAM,oIAAE,CAACI,WAAW,CAACD,GAAG,CAAC;YACrBE,QAAQ;YACRC,MAAMN;YACNO,UAAU;YACVC,UAAU;YACVC,eAAeX,KAAKC,GAAG;YACvBV;YACAqB,QAAQ;QACZ;QAEA,OAAOV;IACX;IAEA,MAAMW,aAAa,OAAOd,IAAYe;QAClC,IAAI,CAACvB,QAAQ;QAEb,MAAM,oIAAE,CAACE,WAAW,CAACsB,MAAM,CAAChB,IAAI;YAC5B,GAAGe,OAAO;YACVX,WAAW,IAAIH,OAAOI,WAAW;QACrC;QAEA,MAAM,oIAAE,CAACE,WAAW,CAACD,GAAG,CAAC;YACrBE,QAAQ;YACRC,MAAM;gBAAET;gBAAI,GAAGe,OAAO;YAAC;YACvBL,UAAU;YACVC,UAAU;YACVC,eAAeX,KAAKC,GAAG;YACvBV;YACAqB,QAAQ;QACZ;IACJ;IAEA,OAAO;QAAEpB;QAAUK;QAAYgB;IAAW;AAC9C;GAvDgBvB;;QACO,8JAAO"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/db/index.ts"],"sourcesContent":["import Dexie, { type Table } from 'dexie';\r\n\r\nexport interface OutboxEntry {\r\n  id: string;\r\n  domain: string;\r\n  action: string;\r\n  payload: any;\r\n  status: 'PENDING' | 'SYNCING' | 'FAILED' | 'COMPLETED';\r\n  retryCount: number;\r\n  lastError?: string;\r\n  createdAt: Date;\r\n  nextAttemptAt?: Date;\r\n}\r\n\r\nexport interface LocalTask {\r\n  id: string;\r\n  farmId: string;\r\n  title: string;\r\n  status: 'TODO' | 'IN_PROGRESS' | 'COMPLETED' | 'VERIFIED';\r\n  dueDate: Date;\r\n  assignedTo?: string;\r\n  data: any;\r\n}\r\n\r\nexport class FarmDB extends Dexie {\r\n  outbox!: Table<OutboxEntry>;\r\n  local_tasks!: Table<LocalTask>;\r\n  local_media!: Table<{ id: string; blob: Blob; metadata: any; synced: boolean }>;\r\n  sync_meta!: Table<{ key: string; value: any }>;\r\n\r\n  constructor() {\r\n    super('FarmOpsDB');\r\n    this.version(1).stores({\r\n      outbox: 'id, domain, status, createdAt',\r\n      local_tasks: 'id, farmId, status, dueDate',\r\n      local_media: 'id, synced',\r\n      sync_meta: 'key'\r\n    });\r\n  }\r\n}\r\n\r\nexport const db = new FarmDB();\r\n"],"names":["FarmDB","outbox","local_tasks","local_media","sync_meta","version","stores","db"],"mappings":";;;;;;AAAA;;AAwBO,MAAMA,eAAe,yJAAK;IAC/BC,OAA4B;IAC5BC,YAA+B;IAC/BC,YAAgF;IAChFC,UAA+C;IAE/CJ,aAAc;QACZ,KAAK,CAAC;QACN,IAAI,CAACK,OAAO,CAAC,GAAGC,MAAM,CAAC;YACrBL,QAAQ;YACRC,aAAa;YACbC,aAAa;YACbC,WAAW;QACb;IACF;AACF;AAEO,MAAMG,KAAK,IAAIP"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/hooks/use-offline-sync.ts"],"sourcesContent":["import { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { db, OutboxEntry } from '@/lib/db';\r\nimport { useOutboxStore } from '@/lib/store/outbox';\r\nimport { useCallback, useEffect } from 'react';\r\n\r\nexport function useOfflineAction<T>(domain: string, action: string) {\r\n  const queryClient = useQueryClient();\r\n  const setPendingCount = useOutboxStore((state) => state.setPendingCount);\r\n\r\n  return useMutation({\r\n    mutationFn: async (payload: T) => {\r\n      const entry: OutboxEntry = {\r\n        id: crypto.randomUUID(),\r\n        domain,\r\n        action,\r\n        payload,\r\n        status: 'PENDING',\r\n        retryCount: 0,\r\n        createdAt: new Date(),\r\n      };\r\n\r\n      await db.outbox.add(entry);\r\n      \r\n      const count = await db.outbox.where('status').equals('PENDING').count();\r\n      setPendingCount(count);\r\n\r\n      // Attempt immediate sync if online\r\n      if (typeof window !== 'undefined' && navigator.onLine) {\r\n        // In a real app, you'd trigger the sync orchestrator here\r\n        console.log('Online: Triggering sync for', entry.id);\r\n      }\r\n\r\n      return entry;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [domain] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useSyncOrchestrator() {\r\n  const setPendingCount = useOutboxStore((state) => state.setPendingCount);\r\n  const setSyncing = useOutboxStore((state) => state.setSyncing);\r\n\r\n  const runSync = useCallback(async () => {\r\n    const pending = await db.outbox\r\n      .where('status')\r\n      .anyOf(['PENDING', 'FAILED'])\r\n      .toArray();\r\n\r\n    if (pending.length === 0) return;\r\n\r\n    setSyncing(true);\r\n    \r\n    for (const item of pending) {\r\n      try {\r\n        // Implement exponential backoff check here logic\r\n        // await apiClient.processEvent(item);\r\n        await db.outbox.update(item.id, { status: 'COMPLETED' });\r\n      } catch (error) {\r\n        await db.outbox.update(item.id, { \r\n          status: 'FAILED', \r\n          retryCount: item.retryCount + 1,\r\n          lastError: error instanceof Error ? error.message : 'Unknown error'\r\n        });\r\n      }\r\n    }\r\n\r\n    const count = await db.outbox.where('status').equals('PENDING').count();\r\n    setPendingCount(count);\r\n    setSyncing(false);\r\n  }, [setPendingCount, setSyncing]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    window.addEventListener('online', runSync);\r\n    return () => window.removeEventListener('online', runSync);\r\n  }, [runSync]);\r\n\r\n  return { runSync };\r\n}\r\n"],"names":["useOfflineAction","domain","action","queryClient","setPendingCount","state","mutationFn","payload","entry","id","crypto","randomUUID","status","retryCount","createdAt","Date","outbox","add","count","where","equals","navigator","onLine","console","log","onSuccess","invalidateQueries","queryKey","useSyncOrchestrator","setSyncing","runSync","pending","anyOf","toArray","length","item","update","error","lastError","Error","message","window","addEventListener","removeEventListener"],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAEO,SAASA,iBAAoBC,MAAc,EAAEC,MAAc;;IAChE,MAAMC,cAAc,IAAA,2MAAc;IAClC,MAAMC,kBAAkB,IAAA,kJAAc;4DAAC,CAACC,QAAUA,MAAMD,eAAe;;IAEvE,OAAO,IAAA,gMAAW,EAAC;QACjBE,UAAU;4CAAE,OAAOC;gBACjB,MAAMC,QAAqB;oBACzBC,IAAIC,OAAOC,UAAU;oBACrBV;oBACAC;oBACAK;oBACAK,QAAQ;oBACRC,YAAY;oBACZC,WAAW,IAAIC;gBACjB;gBAEA,MAAM,kIAAE,CAACC,MAAM,CAACC,GAAG,CAACT;gBAEpB,MAAMU,QAAQ,MAAM,kIAAE,CAACF,MAAM,CAACG,KAAK,CAAC,UAAUC,MAAM,CAAC,WAAWF,KAAK;gBACrEd,gBAAgBc;gBAEhB,mCAAmC;gBACnC,IAAI,+CAAkB,eAAeG,UAAUC,MAAM,EAAE;oBACrD,0DAA0D;oBAC1DC,QAAQC,GAAG,CAAC,+BAA+BhB,MAAMC,EAAE;gBACrD;gBAEA,OAAOD;YACT;;QACAiB,SAAS;4CAAE;gBACTtB,YAAYuB,iBAAiB,CAAC;oBAAEC,UAAU;wBAAC1B;qBAAO;gBAAC;YACrD;;IACF;AACF;GAjCgBD;;QACM,2MAAc;QACV,kJAAc;QAE/B,gMAAW;;;AA+Bb,SAAS4B;;IACd,MAAMxB,kBAAkB,IAAA,kJAAc;+DAAC,CAACC,QAAUA,MAAMD,eAAe;;IACvE,MAAMyB,aAAa,IAAA,kJAAc;0DAAC,CAACxB,QAAUA,MAAMwB,UAAU;;IAE7D,MAAMC,UAAU,IAAA,4KAAW;oDAAC;YAC1B,MAAMC,UAAU,MAAM,kIAAE,CAACf,MAAM,CAC5BG,KAAK,CAAC,UACNa,KAAK,CAAC;gBAAC;gBAAW;aAAS,EAC3BC,OAAO;YAEV,IAAIF,QAAQG,MAAM,KAAK,GAAG;YAE1BL,WAAW;YAEX,KAAK,MAAMM,QAAQJ,QAAS;gBAC1B,IAAI;oBACF,iDAAiD;oBACjD,sCAAsC;oBACtC,MAAM,kIAAE,CAACf,MAAM,CAACoB,MAAM,CAACD,KAAK1B,EAAE,EAAE;wBAAEG,QAAQ;oBAAY;gBACxD,EAAE,OAAOyB,OAAO;oBACd,MAAM,kIAAE,CAACrB,MAAM,CAACoB,MAAM,CAACD,KAAK1B,EAAE,EAAE;wBAC9BG,QAAQ;wBACRC,YAAYsB,KAAKtB,UAAU,GAAG;wBAC9ByB,WAAWD,iBAAiBE,QAAQF,MAAMG,OAAO,GAAG;oBACtD;gBACF;YACF;YAEA,MAAMtB,QAAQ,MAAM,kIAAE,CAACF,MAAM,CAACG,KAAK,CAAC,UAAUC,MAAM,CAAC,WAAWF,KAAK;YACrEd,gBAAgBc;YAChBW,WAAW;QACb;mDAAG;QAACzB;QAAiByB;KAAW;IAEhC,IAAA,0KAAS;yCAAC;YACR;;YAEAY,OAAOC,gBAAgB,CAAC,UAAUZ;YAClC;iDAAO,IAAMW,OAAOE,mBAAmB,CAAC,UAAUb;;QACpD;wCAAG;QAACA;KAAQ;IAEZ,OAAO;QAAEA;IAAQ;AACnB;IAzCgBF;;QACU,kJAAc;QACnB,kJAAc"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/tasks/proof-capture.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useOfflineAction } from '@/hooks/use-offline-sync';\r\nimport { CameraIcon, MicrophoneIcon, VideoCameraIcon, MapPinIcon, ClockIcon } from '@heroicons/react/24/solid';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport function ProofCapture({ taskId, onComplete }: { taskId: string, onComplete: () => void }) {\r\n  const [photoUrl, setPhotoUrl] = useState('');\r\n  const [videoUrl, setVideoUrl] = useState('');\r\n  const [voiceNote, setVoiceNote] = useState('');\r\n  const [recording, setRecording] = useState(false);\r\n  const [metadataPreview, setMetadataPreview] = useState<{ lat: number; lng: number; capturedAt: string } | null>(null);\r\n  const { mutate: completeTask, isPending } = useOfflineAction('tasks', 'TASK_COMPLETED');\r\n\r\n  const handleCapture = async () => {\r\n    const capturedAt = new Date().toISOString();\r\n\r\n    try {\r\n      const position = await new Promise<GeolocationPosition>((resolve, reject) =>\r\n        navigator.geolocation.getCurrentPosition(resolve, reject, {\r\n          enableHighAccuracy: true,\r\n          timeout: 8000,\r\n        })\r\n      );\r\n\r\n      const proofPayload = {\r\n        taskId,\r\n        capturedAt,\r\n        metadata: {\r\n          time: capturedAt,\r\n          gps: {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude,\r\n          },\r\n        },\r\n        attachments: {\r\n          photo: photoUrl || undefined,\r\n          video: videoUrl || undefined,\r\n          voice: voiceNote || undefined,\r\n        },\r\n      };\r\n\r\n      setMetadataPreview({\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude,\r\n        capturedAt,\r\n      });\r\n\r\n      completeTask(proofPayload, {\r\n        onSuccess: () => {\r\n          setPhotoUrl('');\r\n          setVideoUrl('');\r\n          setVoiceNote('');\r\n          setRecording(false);\r\n          onComplete();\r\n        },\r\n      });\r\n    } catch {\r\n      completeTask({\r\n        taskId,\r\n        capturedAt,\r\n        metadata: { time: capturedAt },\r\n        attachments: {\r\n          photo: photoUrl || undefined,\r\n          video: videoUrl || undefined,\r\n          voice: voiceNote || undefined,\r\n        },\r\n      }, {\r\n        onSuccess: () => onComplete(),\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-4 border rounded-lg bg-card shadow-sm\">\r\n      <h3 className=\"font-semibold text-sm\">Proof of Work</h3>\r\n      \r\n      <div className=\"grid grid-cols-3 gap-2\">\r\n        <div className=\"p-3 border-2 border-dashed rounded-md space-y-2\">\r\n          <CameraIcon className=\"h-8 w-8 text-muted-foreground\" />\r\n          <input\r\n            value={photoUrl}\r\n            onChange={(event) => setPhotoUrl(event.target.value)}\r\n            placeholder=\"Photo URL\"\r\n            className=\"w-full h-8 rounded bg-accent/50 px-2 text-[10px]\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"p-3 border-2 border-dashed rounded-md space-y-2\">\r\n          <VideoCameraIcon className=\"h-8 w-8 text-muted-foreground\" />\r\n          <input\r\n            value={videoUrl}\r\n            onChange={(event) => setVideoUrl(event.target.value)}\r\n            placeholder=\"Video URL\"\r\n            className=\"w-full h-8 rounded bg-accent/50 px-2 text-[10px]\"\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          className={cn(\r\n            \"flex flex-col items-center justify-center p-4 border-2 border-dashed rounded-md transition-colors\",\r\n            recording ? \"bg-destructive/10 border-destructive\" : \"hover:bg-accent\"\r\n          )}\r\n          onClick={() => setRecording(!recording)}\r\n        >\r\n          <MicrophoneIcon className={cn(\"h-8 w-8\", recording ? \"text-destructive animate-pulse\" : \"text-muted-foreground\")} />\r\n          <span className=\"text-[10px] mt-1 uppercase\">{recording ? 'Recording...' : 'Add Voice'}</span>\r\n        </button>\r\n      </div>\r\n\r\n      <input\r\n        value={voiceNote}\r\n        onChange={(event) => setVoiceNote(event.target.value)}\r\n        placeholder=\"Voice transcript or note\"\r\n        className=\"w-full h-10 rounded-md bg-accent/50 px-3 text-xs\"\r\n      />\r\n\r\n      <div className=\"rounded-md border bg-accent/20 p-3 text-[11px] text-muted-foreground space-y-1\">\r\n        <p className=\"font-semibold uppercase text-[10px]\">Metadata to attach</p>\r\n        <p className=\"flex items-center gap-1\"><ClockIcon className=\"h-3 w-3\" /> Time: {metadataPreview?.capturedAt ?? 'Captured on submit'}</p>\r\n        <p className=\"flex items-center gap-1\"><MapPinIcon className=\"h-3 w-3\" /> GPS: {metadataPreview ? `${metadataPreview.lat.toFixed(5)}, ${metadataPreview.lng.toFixed(5)}` : 'Will request device location'}</p>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleCapture}\r\n        disabled={isPending}\r\n        className=\"w-full py-3 bg-primary text-primary-foreground font-bold rounded-md active:scale-95 transition-all shadow-md\"\r\n      >\r\n        {isPending ? 'Queuing sync...' : 'Complete Task'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ProofCapture","taskId","onComplete","photoUrl","setPhotoUrl","videoUrl","setVideoUrl","voiceNote","setVoiceNote","recording","setRecording","metadataPreview","setMetadataPreview","mutate","completeTask","isPending","handleCapture","capturedAt","Date","toISOString","position","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","enableHighAccuracy","timeout","proofPayload","metadata","time","gps","lat","coords","latitude","lng","longitude","attachments","photo","undefined","video","voice","onSuccess","className","value","onChange","event","target","placeholder","onClick","toFixed","disabled"],"mappings":"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"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/tasks/task-detail.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { useTaskClient } from '@/services/task/task-client';\r\nimport { type LocalTask } from '@/lib/offline/db';\r\nimport { ProofCapture } from './proof-capture';\r\nimport { ChevronLeftIcon, MapPinIcon, CalendarIcon } from '@heroicons/react/24/outline';\r\n\r\nexport function TaskDetail() {\r\n    const { taskId } = useParams();\r\n    const router = useRouter();\r\n    const { getTasks, updateTask } = useTaskClient();\r\n    const [task, setTask] = useState<LocalTask | null>(null);\r\n\r\n    useEffect(() => {\r\n        const load = async () => {\r\n            const allTasks = await getTasks();\r\n            const found = allTasks.find(t => t.id === taskId);\r\n            if (found) setTask(found);\r\n        };\r\n        load();\r\n    }, [taskId, getTasks]);\r\n\r\n    if (!task) return <div className=\"p-8 text-center\">Loading task...</div>;\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n                <button onClick={() => router.back()} className=\"h-10 w-10 flex items-center justify-center rounded-full bg-accent\">\r\n                    <ChevronLeftIcon className=\"h-6 w-6\" />\r\n                </button>\r\n                <h1 className=\"text-xl font-bold flex-1 truncate\">{task.title}</h1>\r\n            </div>\r\n\r\n            <div className=\"bg-card rounded-2xl p-4 border space-y-4\">\r\n                <div className=\"flex items-center gap-3 text-muted-foreground text-sm\">\r\n                    <CalendarIcon className=\"h-4 w-4\" />\r\n                    <span>Due {task.dueDate ? new Date(task.dueDate).toLocaleString() : 'ASAP'}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 text-muted-foreground text-sm\">\r\n                    <MapPinIcon className=\"h-4 w-4\" />\r\n                    <span>Section 4 - North Field</span>\r\n                </div>\r\n                <div className=\"prose prose-sm dark:prose-invert\">\r\n                    <p>{task.description || 'No description provided.'}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n                <h3 className=\"font-bold text-sm uppercase tracking-wider text-muted-foreground\">Proof of Work</h3>\r\n                <ProofCapture taskId={task.id} onComplete={() => {\r\n                    updateTask(task.id, { status: 'COMPLETED' });\r\n                }} />\r\n            </div>\r\n\r\n            <button\r\n                onClick={() => updateTask(task.id, { status: 'COMPLETED' })}\r\n                className=\"w-full py-4 bg-primary text-primary-foreground rounded-2xl font-bold text-lg shadow-lg active:scale-[0.98] transition-all\"\r\n            >\r\n                Mark as Finished\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["TaskDetail","taskId","router","getTasks","updateTask","task","setTask","load","allTasks","found","find","t","id","className","onClick","back","title","dueDate","Date","toLocaleString","description","onComplete","status"],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;;;AAPA;;;;;;AASO,SAASA;;IACZ,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,kJAAS;IAC5B,MAAMC,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAEC,QAAQ,EAAEC,UAAU,EAAE,GAAG,IAAA,6JAAa;IAC9C,MAAM,CAACC,MAAMC,QAAQ,GAAG,IAAA,yKAAQ,EAAmB;IAEnD,IAAA,0KAAS;gCAAC;YACN,MAAMC;6CAAO;oBACT,MAAMC,WAAW,MAAML;oBACvB,MAAMM,QAAQD,SAASE,IAAI;2DAACC,CAAAA,IAAKA,EAAEC,EAAE,KAAKX;;oBAC1C,IAAIQ,OAAOH,QAAQG;gBACvB;;YACAF;QACJ;+BAAG;QAACN;QAAQE;KAAS;IAErB,IAAI,CAACE,MAAM,qBAAO,6LAAC;QAAIQ,WAAU;kBAAkB;;;;;;IAEnD,qBACI,6LAAC;QAAIA,WAAU;;0BACX,6LAAC;gBAAIA,WAAU;;kCACX,6LAAC;wBAAOC,SAAS,IAAMZ,OAAOa,IAAI;wBAAIF,WAAU;kCAC5C,cAAA,6LAAC,mPAAe;4BAACA,WAAU;;;;;;;;;;;kCAE/B,6LAAC;wBAAGA,WAAU;kCAAqCR,KAAKW,KAAK;;;;;;;;;;;;0BAGjE,6LAAC;gBAAIH,WAAU;;kCACX,6LAAC;wBAAIA,WAAU;;0CACX,6LAAC,0OAAY;gCAACA,WAAU;;;;;;0CACxB,6LAAC;;oCAAK;oCAAKR,KAAKY,OAAO,GAAG,IAAIC,KAAKb,KAAKY,OAAO,EAAEE,cAAc,KAAK;;;;;;;;;;;;;kCAExE,6LAAC;wBAAIN,WAAU;;0CACX,6LAAC,oOAAU;gCAACA,WAAU;;;;;;0CACtB,6LAAC;0CAAK;;;;;;;;;;;;kCAEV,6LAAC;wBAAIA,WAAU;kCACX,cAAA,6LAAC;sCAAGR,KAAKe,WAAW,IAAI;;;;;;;;;;;;;;;;;0BAIhC,6LAAC;gBAAIP,WAAU;;kCACX,6LAAC;wBAAGA,WAAU;kCAAmE;;;;;;kCACjF,6LAAC,8KAAY;wBAACZ,QAAQI,KAAKO,EAAE;wBAAES,YAAY;4BACvCjB,WAAWC,KAAKO,EAAE,EAAE;gCAAEU,QAAQ;4BAAY;wBAC9C;;;;;;;;;;;;0BAGJ,6LAAC;gBACGR,SAAS,IAAMV,WAAWC,KAAKO,EAAE,EAAE;wBAAEU,QAAQ;oBAAY;gBACzDT,WAAU;0BACb;;;;;;;;;;;;AAKb;GAvDgBb;;QACO,kJAAS;QACb,kJAAS;QACS,6JAAa;;;KAHlCA"}}]
}