{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/offline/db.ts"],"sourcesContent":["import Dexie, { type Table } from 'dexie';\r\n\r\nexport interface LocalEvent {\r\n    id?: number;\r\n    type: string;\r\n    payload: any;\r\n    timestamp: number;\r\n    synced: 0 | 1;\r\n    farmId: string;\r\n}\r\n\r\nexport interface OutboxJob {\r\n    id?: number;\r\n    action: string;\r\n    data: any;\r\n    priority: number;\r\n    attempts: number;\r\n    nextAttemptAt: number;\r\n    lastError?: string;\r\n    farmId: string;\r\n    status: 'PENDING' | 'FAILED' | 'PROCESSED';\r\n}\r\n\r\nexport interface LocalTask {\r\n    id: string; // Server ID\r\n    farmId: string;\r\n    title: string;\r\n    description?: string;\r\n    status: string;\r\n    dueDate?: string;\r\n    assigneeId?: string;\r\n    templateId?: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface LocalMedia {\r\n    id: string; // Internal blob ID or reference\r\n    farmId: string;\r\n    blob: Blob;\r\n    type: string;\r\n    metadata: any;\r\n    uploaded: 0 | 1;\r\n}\r\n\r\nexport interface SyncMeta {\r\n    key: string; // e.g., 'tasks_cursor'\r\n    farmId: string;\r\n    value: string;\r\n    updatedAt: number;\r\n}\r\n\r\nexport class FarmDB extends Dexie {\r\n    local_events!: Table<LocalEvent>;\r\n    outbox_jobs!: Table<OutboxJob>;\r\n    local_tasks!: Table<LocalTask>;\r\n    local_media!: Table<LocalMedia>;\r\n    sync_meta!: Table<SyncMeta>;\r\n\r\n    constructor() {\r\n        super('FarmDB');\r\n        this.version(1).stores({\r\n            local_events: '++id, type, farmId, synced, timestamp',\r\n            outbox_jobs: '++id, action, farmId, status, nextAttemptAt',\r\n            local_tasks: 'id, farmId, status, assigneeId, dueDate',\r\n            local_media: 'id, farmId, uploaded',\r\n            sync_meta: '[key+farmId]',\r\n        });\r\n    }\r\n}\r\n\r\nexport const db = new FarmDB();\r\n"],"names":["FarmDB","local_events","outbox_jobs","local_tasks","local_media","sync_meta","version","stores","db"],"mappings":";;;;;;AAAA;;AAmDO,MAAMA,eAAe,sJAAK;IAC7BC,aAAiC;IACjCC,YAA+B;IAC/BC,YAA+B;IAC/BC,YAAgC;IAChCC,UAA4B;IAE5BL,aAAc;QACV,KAAK,CAAC;QACN,IAAI,CAACM,OAAO,CAAC,GAAGC,MAAM,CAAC;YACnBN,cAAc;YACdC,aAAa;YACbC,aAAa;YACbC,aAAa;YACbC,WAAW;QACf;IACJ;AACJ;AAEO,MAAMG,KAAK,IAAIR"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/finance/approval-inbox.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { CheckIcon, XMarkIcon, CurrencyDollarIcon } from '@heroicons/react/24/outline';\r\nimport { db } from '@/lib/offline/db';\r\n\r\nexport function ApprovalInbox() {\r\n    const [requests, setRequests] = useState([\r\n        { id: '1', requester: 'John Doe', amount: 1200, category: 'FEED', description: 'Emergency cattle feed for North Lot', status: 'PENDING' },\r\n        { id: '2', requester: 'Jane Smith', amount: 450, category: 'TOOLS', description: 'Replacement irrigation valves (10x)', status: 'PENDING' },\r\n    ]);\r\n\r\n    const handleDecision = async (id: string, decision: 'APPROVED' | 'REJECTED') => {\r\n        // In a real app, this would use the finance-client to update local DB and queue sync\r\n        setRequests(prev => prev.filter(r => r.id !== id));\r\n\r\n        await db.outbox_jobs.add({\r\n            action: 'SPEND_REQUEST_DECISION',\r\n            data: { id, decision },\r\n            priority: 3,\r\n            attempts: 0,\r\n            nextAttemptAt: Date.now(),\r\n            farmId: 'farm-123',\r\n            status: 'PENDING',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-6\">\r\n            <h1 className=\"text-2xl font-bold\">Pending Approvals</h1>\r\n\r\n            <div className=\"grid gap-4\">\r\n                {requests.length === 0 ? (\r\n                    <div className=\"text-center py-12 border-2 border-dashed rounded-2xl\">\r\n                        <p className=\"text-muted-foreground\">All caught up! No pending requests.</p>\r\n                    </div>\r\n                ) : (\r\n                    requests.map((req) => (\r\n                        <div key={req.id} className=\"bg-card border rounded-2xl p-5 shadow-sm space-y-4\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div className=\"flex gap-3\">\r\n                                    <div className=\"h-10 w-10 rounded-full bg-accent flex items-center justify-center\">\r\n                                        <CurrencyDollarIcon className=\"h-6 w-6 text-primary\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"font-bold\">{req.requester}</h3>\r\n                                        <p className=\"text-[10px] uppercase font-bold text-muted-foreground\">{req.category}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-xl font-black text-primary\">${req.amount}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <p className=\"text-sm text-muted-foreground\">{req.description}</p>\r\n\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => handleDecision(req.id, 'APPROVED')}\r\n                                    className=\"flex-1 py-3 bg-green-600 text-white rounded-xl font-bold flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <CheckIcon className=\"h-5 w-5\" />\r\n                                    Approve\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => handleDecision(req.id, 'REJECTED')}\r\n                                    className=\"flex-1 py-3 bg-accent text-accent-foreground rounded-xl font-bold flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <XMarkIcon className=\"h-5 w-5\" />\r\n                                    Decline\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["ApprovalInbox","requests","setRequests","id","requester","amount","category","description","status","handleDecision","decision","prev","filter","r","outbox_jobs","add","action","data","priority","attempts","nextAttemptAt","Date","now","farmId","className","length","map","req","onClick"],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AACA;AALA;;;;;AAOO,SAASA;IACZ,MAAM,CAACC,UAAUC,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACrC;YAAEC,IAAI;YAAKC,WAAW;YAAYC,QAAQ;YAAMC,UAAU;YAAQC,aAAa;YAAuCC,QAAQ;QAAU;QACxI;YAAEL,IAAI;YAAKC,WAAW;YAAcC,QAAQ;YAAKC,UAAU;YAASC,aAAa;YAAuCC,QAAQ;QAAU;KAC7I;IAED,MAAMC,iBAAiB,OAAON,IAAYO;QACtC,qFAAqF;QACrFR,YAAYS,CAAAA,OAAQA,KAAKC,MAAM,CAACC,CAAAA,IAAKA,EAAEV,EAAE,KAAKA;QAE9C,MAAM,iIAAE,CAACW,WAAW,CAACC,GAAG,CAAC;YACrBC,QAAQ;YACRC,MAAM;gBAAEd;gBAAIO;YAAS;YACrBQ,UAAU;YACVC,UAAU;YACVC,eAAeC,KAAKC,GAAG;YACvBC,QAAQ;YACRf,QAAQ;QACZ;IACJ;IAEA,qBACI,8OAAC;QAAIgB,WAAU;;0BACX,8OAAC;gBAAGA,WAAU;0BAAqB;;;;;;0BAEnC,8OAAC;gBAAIA,WAAU;0BACVvB,SAASwB,MAAM,KAAK,kBACjB,8OAAC;oBAAID,WAAU;8BACX,cAAA,8OAAC;wBAAEA,WAAU;kCAAwB;;;;;;;;;;2BAGzCvB,SAASyB,GAAG,CAAC,CAACC,oBACV,8OAAC;wBAAiBH,WAAU;;0CACxB,8OAAC;gCAAIA,WAAU;;kDACX,8OAAC;wCAAIA,WAAU;;0DACX,8OAAC;gDAAIA,WAAU;0DACX,cAAA,8OAAC,yPAAkB;oDAACA,WAAU;;;;;;;;;;;0DAElC,8OAAC;;kEACG,8OAAC;wDAAGA,WAAU;kEAAaG,IAAIvB,SAAS;;;;;;kEACxC,8OAAC;wDAAEoB,WAAU;kEAAyDG,IAAIrB,QAAQ;;;;;;;;;;;;;;;;;;kDAG1F,8OAAC;wCAAIkB,WAAU;kDACX,cAAA,8OAAC;4CAAEA,WAAU;;gDAAkC;gDAAEG,IAAItB,MAAM;;;;;;;;;;;;;;;;;;0CAInE,8OAAC;gCAAEmB,WAAU;0CAAiCG,IAAIpB,WAAW;;;;;;0CAE7D,8OAAC;gCAAIiB,WAAU;;kDACX,8OAAC;wCACGI,SAAS,IAAMnB,eAAekB,IAAIxB,EAAE,EAAE;wCACtCqB,WAAU;;0DAEV,8OAAC,8NAAS;gDAACA,WAAU;;;;;;4CAAY;;;;;;;kDAGrC,8OAAC;wCACGI,SAAS,IAAMnB,eAAekB,IAAIxB,EAAE,EAAE;wCACtCqB,WAAU;;0DAEV,8OAAC,8NAAS;gDAACA,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;uBA9BnCG,IAAIxB,EAAE;;;;;;;;;;;;;;;;AAwCxC"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/finance/budget-overview.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport function BudgetOverview() {\r\n    const [budgets] = useState([\r\n        { id: '1', name: 'Q1 Feed & Supplies', allocated: 50000, spent: 34200, category: 'OPERATIONAL' },\r\n        { id: '2', name: 'Machine Maintenance', allocated: 12000, spent: 11500, category: 'MAINTENANCE' },\r\n        { id: '3', name: 'New Irrigation Project', allocated: 80000, spent: 12000, category: 'CAPITAL' },\r\n    ]);\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-6\">\r\n            <h1 className=\"text-2xl font-bold\">Budgets</h1>\r\n\r\n            <div className=\"grid gap-4\">\r\n                {budgets.map((budget) => {\r\n                    const percent = (budget.spent / budget.allocated) * 100;\r\n                    return (\r\n                        <div key={budget.id} className=\"bg-card border rounded-2xl p-4 shadow-sm space-y-3\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div>\r\n                                    <h3 className=\"font-bold\">{budget.name}</h3>\r\n                                    <span className=\"text-[10px] uppercase font-bold text-muted-foreground\">{budget.category}</span>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-lg font-bold\">${budget.spent.toLocaleString()}</p>\r\n                                    <p className=\"text-[10px] text-muted-foreground uppercase font-bold\">of ${budget.allocated.toLocaleString()}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"h-2 w-full bg-accent rounded-full overflow-hidden\">\r\n                                <div\r\n                                    className={cn(\r\n                                        \"h-full transition-all duration-1000\",\r\n                                        percent > 90 ? \"bg-destructive\" : percent > 70 ? \"bg-amber-500\" : \"bg-primary\"\r\n                                    )}\r\n                                    style={{ width: `${Math.min(percent, 100)}%` }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["BudgetOverview","budgets","id","name","allocated","spent","category","className","map","budget","percent","toLocaleString","style","width","Math","min"],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAASA;IACZ,MAAM,CAACC,QAAQ,GAAG,IAAA,iNAAQ,EAAC;QACvB;YAAEC,IAAI;YAAKC,MAAM;YAAsBC,WAAW;YAAOC,OAAO;YAAOC,UAAU;QAAc;QAC/F;YAAEJ,IAAI;YAAKC,MAAM;YAAuBC,WAAW;YAAOC,OAAO;YAAOC,UAAU;QAAc;QAChG;YAAEJ,IAAI;YAAKC,MAAM;YAA0BC,WAAW;YAAOC,OAAO;YAAOC,UAAU;QAAU;KAClG;IAED,qBACI,8OAAC;QAAIC,WAAU;;0BACX,8OAAC;gBAAGA,WAAU;0BAAqB;;;;;;0BAEnC,8OAAC;gBAAIA,WAAU;0BACVN,QAAQO,GAAG,CAAC,CAACC;oBACV,MAAMC,UAAU,AAACD,OAAOJ,KAAK,GAAGI,OAAOL,SAAS,GAAI;oBACpD,qBACI,8OAAC;wBAAoBG,WAAU;;0CAC3B,8OAAC;gCAAIA,WAAU;;kDACX,8OAAC;;0DACG,8OAAC;gDAAGA,WAAU;0DAAaE,OAAON,IAAI;;;;;;0DACtC,8OAAC;gDAAKI,WAAU;0DAAyDE,OAAOH,QAAQ;;;;;;;;;;;;kDAE5F,8OAAC;wCAAIC,WAAU;;0DACX,8OAAC;gDAAEA,WAAU;;oDAAoB;oDAAEE,OAAOJ,KAAK,CAACM,cAAc;;;;;;;0DAC9D,8OAAC;gDAAEJ,WAAU;;oDAAwD;oDAAKE,OAAOL,SAAS,CAACO,cAAc;;;;;;;;;;;;;;;;;;;0CAIjH,8OAAC;gCAAIJ,WAAU;0CACX,cAAA,8OAAC;oCACGA,WAAW,IAAA,yHAAE,EACT,uCACAG,UAAU,KAAK,mBAAmBA,UAAU,KAAK,iBAAiB;oCAEtEE,OAAO;wCAAEC,OAAO,GAAGC,KAAKC,GAAG,CAACL,SAAS,KAAK,CAAC,CAAC;oCAAC;;;;;;;;;;;;uBAlB/CD,OAAOP,EAAE;;;;;gBAuB3B;;;;;;;;;;;;AAIhB"}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/db/index.ts"],"sourcesContent":["import Dexie, { type Table } from 'dexie';\r\n\r\nexport interface OutboxEntry {\r\n  id: string;\r\n  domain: string;\r\n  action: string;\r\n  payload: any;\r\n  status: 'PENDING' | 'SYNCING' | 'FAILED' | 'COMPLETED';\r\n  retryCount: number;\r\n  lastError?: string;\r\n  createdAt: Date;\r\n  nextAttemptAt?: Date;\r\n}\r\n\r\nexport interface LocalTask {\r\n  id: string;\r\n  farmId: string;\r\n  title: string;\r\n  status: 'TODO' | 'IN_PROGRESS' | 'COMPLETED' | 'VERIFIED';\r\n  dueDate: Date;\r\n  assignedTo?: string;\r\n  data: any;\r\n}\r\n\r\nexport class FarmDB extends Dexie {\r\n  outbox!: Table<OutboxEntry>;\r\n  local_tasks!: Table<LocalTask>;\r\n  local_media!: Table<{ id: string; blob: Blob; metadata: any; synced: boolean }>;\r\n  sync_meta!: Table<{ key: string; value: any }>;\r\n\r\n  constructor() {\r\n    super('FarmOpsDB');\r\n    this.version(1).stores({\r\n      outbox: 'id, domain, status, createdAt',\r\n      local_tasks: 'id, farmId, status, dueDate',\r\n      local_media: 'id, synced',\r\n      sync_meta: 'key'\r\n    });\r\n  }\r\n}\r\n\r\nexport const db = new FarmDB();\r\n"],"names":["FarmDB","outbox","local_tasks","local_media","sync_meta","version","stores","db"],"mappings":";;;;;;AAAA;;AAwBO,MAAMA,eAAe,sJAAK;IAC/BC,OAA4B;IAC5BC,YAA+B;IAC/BC,YAAgF;IAChFC,UAA+C;IAE/CJ,aAAc;QACZ,KAAK,CAAC;QACN,IAAI,CAACK,OAAO,CAAC,GAAGC,MAAM,CAAC;YACrBL,QAAQ;YACRC,aAAa;YACbC,aAAa;YACbC,WAAW;QACb;IACF;AACF;AAEO,MAAMG,KAAK,IAAIP"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/hooks/use-offline-sync.ts"],"sourcesContent":["import { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { db, OutboxEntry } from '@/lib/db';\r\nimport { useOutboxStore } from '@/lib/store/outbox';\r\nimport { useCallback, useEffect } from 'react';\r\n\r\nexport function useOfflineAction<T>(domain: string, action: string) {\r\n  const queryClient = useQueryClient();\r\n  const setPendingCount = useOutboxStore((state) => state.setPendingCount);\r\n\r\n  return useMutation({\r\n    mutationFn: async (payload: T) => {\r\n      const entry: OutboxEntry = {\r\n        id: crypto.randomUUID(),\r\n        domain,\r\n        action,\r\n        payload,\r\n        status: 'PENDING',\r\n        retryCount: 0,\r\n        createdAt: new Date(),\r\n      };\r\n\r\n      await db.outbox.add(entry);\r\n      \r\n      const count = await db.outbox.where('status').equals('PENDING').count();\r\n      setPendingCount(count);\r\n\r\n      // Attempt immediate sync if online\r\n      if (typeof window !== 'undefined' && navigator.onLine) {\r\n        // In a real app, you'd trigger the sync orchestrator here\r\n        console.log('Online: Triggering sync for', entry.id);\r\n      }\r\n\r\n      return entry;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [domain] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useSyncOrchestrator() {\r\n  const setPendingCount = useOutboxStore((state) => state.setPendingCount);\r\n  const setSyncing = useOutboxStore((state) => state.setSyncing);\r\n\r\n  const runSync = useCallback(async () => {\r\n    const pending = await db.outbox\r\n      .where('status')\r\n      .anyOf(['PENDING', 'FAILED'])\r\n      .toArray();\r\n\r\n    if (pending.length === 0) return;\r\n\r\n    setSyncing(true);\r\n    \r\n    for (const item of pending) {\r\n      try {\r\n        // Implement exponential backoff check here logic\r\n        // await apiClient.processEvent(item);\r\n        await db.outbox.update(item.id, { status: 'COMPLETED' });\r\n      } catch (error) {\r\n        await db.outbox.update(item.id, { \r\n          status: 'FAILED', \r\n          retryCount: item.retryCount + 1,\r\n          lastError: error instanceof Error ? error.message : 'Unknown error'\r\n        });\r\n      }\r\n    }\r\n\r\n    const count = await db.outbox.where('status').equals('PENDING').count();\r\n    setPendingCount(count);\r\n    setSyncing(false);\r\n  }, [setPendingCount, setSyncing]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    window.addEventListener('online', runSync);\r\n    return () => window.removeEventListener('online', runSync);\r\n  }, [runSync]);\r\n\r\n  return { runSync };\r\n}\r\n"],"names":["useOfflineAction","domain","action","queryClient","setPendingCount","state","mutationFn","payload","entry","id","crypto","randomUUID","status","retryCount","createdAt","Date","outbox","add","count","where","equals","onSuccess","invalidateQueries","queryKey","useSyncOrchestrator","setSyncing","runSync","pending","anyOf","toArray","length","item","update","error","lastError","Error","message"],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;AACA;;;;;AAEO,SAASA,iBAAoBC,MAAc,EAAEC,MAAc;IAChE,MAAMC,cAAc,IAAA,wMAAc;IAClC,MAAMC,kBAAkB,IAAA,+IAAc,EAAC,CAACC,QAAUA,MAAMD,eAAe;IAEvE,OAAO,IAAA,6LAAW,EAAC;QACjBE,YAAY,OAAOC;YACjB,MAAMC,QAAqB;gBACzBC,IAAIC,OAAOC,UAAU;gBACrBV;gBACAC;gBACAK;gBACAK,QAAQ;gBACRC,YAAY;gBACZC,WAAW,IAAIC;YACjB;YAEA,MAAM,+HAAE,CAACC,MAAM,CAACC,GAAG,CAACT;YAEpB,MAAMU,QAAQ,MAAM,+HAAE,CAACF,MAAM,CAACG,KAAK,CAAC,UAAUC,MAAM,CAAC,WAAWF,KAAK;YACrEd,gBAAgBc;YAEhB,mCAAmC;YACnC;;YAKA,OAAOV;QACT;QACAa,WAAW;YACTlB,YAAYmB,iBAAiB,CAAC;gBAAEC,UAAU;oBAACtB;iBAAO;YAAC;QACrD;IACF;AACF;AAEO,SAASuB;IACd,MAAMpB,kBAAkB,IAAA,+IAAc,EAAC,CAACC,QAAUA,MAAMD,eAAe;IACvE,MAAMqB,aAAa,IAAA,+IAAc,EAAC,CAACpB,QAAUA,MAAMoB,UAAU;IAE7D,MAAMC,UAAU,IAAA,oNAAW,EAAC;QAC1B,MAAMC,UAAU,MAAM,+HAAE,CAACX,MAAM,CAC5BG,KAAK,CAAC,UACNS,KAAK,CAAC;YAAC;YAAW;SAAS,EAC3BC,OAAO;QAEV,IAAIF,QAAQG,MAAM,KAAK,GAAG;QAE1BL,WAAW;QAEX,KAAK,MAAMM,QAAQJ,QAAS;YAC1B,IAAI;gBACF,iDAAiD;gBACjD,sCAAsC;gBACtC,MAAM,+HAAE,CAACX,MAAM,CAACgB,MAAM,CAACD,KAAKtB,EAAE,EAAE;oBAAEG,QAAQ;gBAAY;YACxD,EAAE,OAAOqB,OAAO;gBACd,MAAM,+HAAE,CAACjB,MAAM,CAACgB,MAAM,CAACD,KAAKtB,EAAE,EAAE;oBAC9BG,QAAQ;oBACRC,YAAYkB,KAAKlB,UAAU,GAAG;oBAC9BqB,WAAWD,iBAAiBE,QAAQF,MAAMG,OAAO,GAAG;gBACtD;YACF;QACF;QAEA,MAAMlB,QAAQ,MAAM,+HAAE,CAACF,MAAM,CAACG,KAAK,CAAC,UAAUC,MAAM,CAAC,WAAWF,KAAK;QACrEd,gBAAgBc;QAChBO,WAAW;IACb,GAAG;QAACrB;QAAiBqB;KAAW;IAEhC,IAAA,kNAAS,EAAC;QACR,wCAAmC;;;IAIrC,GAAG;QAACC;KAAQ;IAEZ,OAAO;QAAEA;IAAQ;AACnB"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/features/finance/spend-request-form.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { useOfflineAction } from '@/hooks/use-offline-sync';\r\nimport { useAuth } from '@/components/layout/auth-provider';\r\n\r\nconst spendRequestSchema = z.object({\r\n  category: z.string().min(1, 'Category is required'),\r\n  amount: z.number().positive('Amount must be positive'),\r\n  description: z.string().min(5, 'Description must be at least 5 chars'),\r\n  vendorId: z.string().optional(),\r\n});\r\n\r\ntype SpendRequest = z.infer<typeof spendRequestSchema>;\r\n\r\nexport function SpendRequestForm({ onSuccess }: { onSuccess?: () => void }) {\r\n  const { farmId } = useAuth();\r\n  const { mutate: requestSpend, isPending } = useOfflineAction('finance', 'EXPENSE_REQUESTED');\r\n\r\n  const { register, handleSubmit, formState: { errors }, reset } = useForm<SpendRequest>({\r\n    resolver: zodResolver(spendRequestSchema),\r\n    defaultValues: { amount: 0 }\r\n  });\r\n\r\n  const onSubmit = (data: SpendRequest) => {\r\n    requestSpend({\r\n      ...data,\r\n      farmId,\r\n      requestedAt: new Date().toISOString(),\r\n    });\r\n    reset();\r\n    if (onSuccess) onSuccess();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4 p-6 bg-card border rounded-xl shadow-lg\">\r\n      <h2 className=\"text-xl font-bold\">Request Funds</h2>\r\n      \r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-xs font-semibold text-muted-foreground uppercase\">Category</label>\r\n        <select \r\n          {...register('category')}\r\n          className=\"w-full bg-accent/50 border-none rounded-md px-3 py-2 text-sm focus:ring-2 ring-primary\"\r\n        >\r\n          <option value=\"FUEL\">Fuel</option>\r\n          <option value=\"FERTILIZER\">Fertilizer</option>\r\n          <option value=\"SEED\">Seeds</option>\r\n          <option value=\"REPAIRS\">Maintenance / Repairs</option>\r\n          <option value=\"WAGES\">Casual Wages</option>\r\n        </select>\r\n        {errors.category && <p className=\"text-destructive text-[10px]\">{errors.category.message}</p>}\r\n      </div>\r\n\r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-xs font-semibold text-muted-foreground uppercase\">Amount (GHS)</label>\r\n        <input \r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          {...register('amount', { valueAsNumber: true })}\r\n          className=\"w-full bg-accent/50 border-none rounded-md px-3 py-2 text-sm focus:ring-2 ring-primary\"\r\n        />\r\n        {errors.amount && <p className=\"text-destructive text-[10px]\">{errors.amount.message}</p>}\r\n      </div>\r\n\r\n      <div className=\"space-y-1\">\r\n        <label className=\"text-xs font-semibold text-muted-foreground uppercase\">Description</label>\r\n        <textarea \r\n          {...register('description')}\r\n          className=\"w-full bg-accent/50 border-none rounded-md px-3 py-2 text-sm min-h-[80px]\"\r\n          placeholder=\"What is this for?\"\r\n        />\r\n        {errors.description && <p className=\"text-destructive text-[10px]\">{errors.description.message}</p>}\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={isPending}\r\n        className=\"w-full bg-primary text-primary-foreground py-2 font-bold rounded-lg shadow-md active:scale-[0.98] transition-all disabled:opacity-50\"\r\n      >\r\n        {isPending ? 'Saving Request...' : 'Submit Fund Request'}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":["spendRequestSchema","object","category","string","min","amount","number","positive","description","vendorId","optional","SpendRequestForm","onSuccess","farmId","mutate","requestSpend","isPending","register","handleSubmit","formState","errors","reset","resolver","defaultValues","onSubmit","data","requestedAt","Date","toISOString","className","value","message","type","step","valueAsNumber","placeholder","disabled"],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,MAAMA,qBAAqB,uKAAC,CAACC,MAAM,CAAC;IAClCC,UAAU,uKAAC,CAACC,MAAM,GAAGC,GAAG,CAAC,GAAG;IAC5BC,QAAQ,uKAAC,CAACC,MAAM,GAAGC,QAAQ,CAAC;IAC5BC,aAAa,uKAAC,CAACL,MAAM,GAAGC,GAAG,CAAC,GAAG;IAC/BK,UAAU,uKAAC,CAACN,MAAM,GAAGO,QAAQ;AAC/B;AAIO,SAASC,iBAAiB,EAAEC,SAAS,EAA8B;IACxE,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,2JAAO;IAC1B,MAAM,EAAEC,QAAQC,YAAY,EAAEC,SAAS,EAAE,GAAG,IAAA,0JAAgB,EAAC,WAAW;IAExE,MAAM,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,WAAW,EAAEC,MAAM,EAAE,EAAEC,KAAK,EAAE,GAAG,IAAA,yKAAO,EAAe;QACrFC,UAAU,IAAA,6KAAW,EAACtB;QACtBuB,eAAe;YAAElB,QAAQ;QAAE;IAC7B;IAEA,MAAMmB,WAAW,CAACC;QAChBV,aAAa;YACX,GAAGU,IAAI;YACPZ;YACAa,aAAa,IAAIC,OAAOC,WAAW;QACrC;QACAP;QACA,IAAIT,WAAWA;IACjB;IAEA,qBACE,8OAAC;QAAKY,UAAUN,aAAaM;QAAWK,WAAU;;0BAChD,8OAAC;gBAAGA,WAAU;0BAAoB;;;;;;0BAElC,8OAAC;gBAAIA,WAAU;;kCACb,8OAAC;wBAAMA,WAAU;kCAAwD;;;;;;kCACzE,8OAAC;wBACE,GAAGZ,SAAS,WAAW;wBACxBY,WAAU;;0CAEV,8OAAC;gCAAOC,OAAM;0CAAO;;;;;;0CACrB,8OAAC;gCAAOA,OAAM;0CAAa;;;;;;0CAC3B,8OAAC;gCAAOA,OAAM;0CAAO;;;;;;0CACrB,8OAAC;gCAAOA,OAAM;0CAAU;;;;;;0CACxB,8OAAC;gCAAOA,OAAM;0CAAQ;;;;;;;;;;;;oBAEvBV,OAAOlB,QAAQ,kBAAI,8OAAC;wBAAE2B,WAAU;kCAAgCT,OAAOlB,QAAQ,CAAC6B,OAAO;;;;;;;;;;;;0BAG1F,8OAAC;gBAAIF,WAAU;;kCACb,8OAAC;wBAAMA,WAAU;kCAAwD;;;;;;kCACzE,8OAAC;wBACCG,MAAK;wBACLC,MAAK;wBACJ,GAAGhB,SAAS,UAAU;4BAAEiB,eAAe;wBAAK,EAAE;wBAC/CL,WAAU;;;;;;oBAEXT,OAAOf,MAAM,kBAAI,8OAAC;wBAAEwB,WAAU;kCAAgCT,OAAOf,MAAM,CAAC0B,OAAO;;;;;;;;;;;;0BAGtF,8OAAC;gBAAIF,WAAU;;kCACb,8OAAC;wBAAMA,WAAU;kCAAwD;;;;;;kCACzE,8OAAC;wBACE,GAAGZ,SAAS,cAAc;wBAC3BY,WAAU;wBACVM,aAAY;;;;;;oBAEbf,OAAOZ,WAAW,kBAAI,8OAAC;wBAAEqB,WAAU;kCAAgCT,OAAOZ,WAAW,CAACuB,OAAO;;;;;;;;;;;;0BAGhG,8OAAC;gBACCC,MAAK;gBACLI,UAAUpB;gBACVa,WAAU;0BAETb,YAAY,sBAAsB;;;;;;;;;;;;AAI3C"}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/app/%28dashboard%29/finance/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ApprovalInbox } from '@/components/features/finance/approval-inbox';\r\nimport { BudgetOverview } from '@/components/features/finance/budget-overview';\r\nimport { SpendRequestForm } from '@/components/features/finance/spend-request-form';\r\n\r\nexport default function FinancePage() {\r\n  return (\r\n    <div className=\"p-4 max-w-md mx-auto space-y-6 pb-24\">\r\n      <header>\r\n        <h1 className=\"text-2xl font-bold tracking-tight\">Finance</h1>\r\n        <p className=\"text-xs text-muted-foreground uppercase font-semibold\">Spend governance</p>\r\n      </header>\r\n\r\n      <section className=\"space-y-4\">\r\n        <SpendRequestForm />\r\n      </section>\r\n\r\n      <section className=\"space-y-4\">\r\n        <BudgetOverview />\r\n      </section>\r\n\r\n      <section className=\"space-y-4\">\r\n        <ApprovalInbox />\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["FinancePage","className"],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAASA;IACtB,qBACE,8OAAC;QAAIC,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAGA,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAEA,WAAU;kCAAwD;;;;;;;;;;;;0BAGvE,8OAAC;gBAAQA,WAAU;0BACjB,cAAA,8OAAC,yLAAgB;;;;;;;;;;0BAGnB,8OAAC;gBAAQA,WAAU;0BACjB,cAAA,8OAAC,iLAAc;;;;;;;;;;0BAGjB,8OAAC;gBAAQA,WAAU;0BACjB,cAAA,8OAAC,+KAAa;;;;;;;;;;;;;;;;AAItB"}}]
}