{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/layout/auth-provider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, ReactNode, useEffect, useMemo, useState } from 'react';\r\n\r\ntype Role = 'OWNER' | 'MANAGER' | 'WORKER';\r\n\r\ninterface AuthContextType {\r\n  role: Role | null;\r\n  farmId: string | null;\r\n  isLoading: boolean;\r\n  isRegistered: boolean;\r\n  isAuthenticated: boolean;\r\n  setRole: (role: Role) => void;\r\n  setFarmId: (farmId: string) => void;\r\n  setRegistered: (registered: boolean) => void;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [role, setRoleState] = useState<Role | null>(null);\r\n  const [farmId, setFarmIdState] = useState<string | null>(null);\r\n  const [isRegistered, setIsRegistered] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const registered = localStorage.getItem('farmops.registered') === 'true';\r\n      const storedRole = localStorage.getItem('farmops.role');\r\n      const storedFarmId = localStorage.getItem('farmops.farmId');\r\n\r\n      setIsRegistered(registered);\r\n\r\n      if (!registered) {\r\n        localStorage.removeItem('farmops.role');\r\n        localStorage.removeItem('farmops.farmId');\r\n        return;\r\n      }\r\n\r\n      if (storedRole === 'OWNER' || storedRole === 'MANAGER' || storedRole === 'WORKER') {\r\n        setRoleState(storedRole);\r\n      }\r\n\r\n      if (storedFarmId && storedFarmId.trim().length > 0) {\r\n        setFarmIdState(storedFarmId);\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const setRole = (nextRole: Role) => {\r\n    setRoleState(nextRole);\r\n    localStorage.setItem('farmops.role', nextRole);\r\n  };\r\n\r\n  const setFarmId = (nextFarmId: string) => {\r\n    setFarmIdState(nextFarmId);\r\n    localStorage.setItem('farmops.farmId', nextFarmId);\r\n  };\r\n\r\n  const setRegistered = (registered: boolean) => {\r\n    setIsRegistered(registered);\r\n    localStorage.setItem('farmops.registered', registered ? 'true' : 'false');\r\n\r\n    if (!registered) {\r\n      setRoleState(null);\r\n      setFarmIdState(null);\r\n      localStorage.removeItem('farmops.role');\r\n      localStorage.removeItem('farmops.farmId');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setRoleState(null);\r\n    setFarmIdState(null);\r\n    localStorage.removeItem('farmops.role');\r\n    localStorage.removeItem('farmops.farmId');\r\n  };\r\n\r\n  const auth = useMemo(() => ({\r\n    role,\r\n    farmId,\r\n    isLoading,\r\n    isRegistered,\r\n    isAuthenticated: Boolean(role && farmId),\r\n    setRole,\r\n    setFarmId,\r\n    setRegistered,\r\n    logout,\r\n  }), [role, farmId, isLoading, isRegistered]);\r\n\r\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":["AuthContext","undefined","AuthProvider","children","role","setRoleState","farmId","setFarmIdState","isRegistered","setIsRegistered","isLoading","setIsLoading","registered","localStorage","getItem","storedRole","storedFarmId","removeItem","trim","length","setRole","nextRole","setItem","setFarmId","nextFarmId","setRegistered","logout","auth","isAuthenticated","Boolean","Provider","value","useAuth","context","Error"],"mappings":";;;;;;;AAEA;;;AAFA;;AAkBA,MAAMA,4BAAc,IAAA,8KAAa,EAA8BC;AAExD,SAASC,aAAa,EAAEC,QAAQ,EAA2B;;IAChE,MAAM,CAACC,MAAMC,aAAa,GAAG,IAAA,yKAAQ,EAAc;IACnD,MAAM,CAACC,QAAQC,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IACzD,MAAM,CAACC,cAAcC,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAACC,WAAWC,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;kCAAC;YACR,IAAI;gBACF,MAAMC,aAAaC,aAAaC,OAAO,CAAC,0BAA0B;gBAClE,MAAMC,aAAaF,aAAaC,OAAO,CAAC;gBACxC,MAAME,eAAeH,aAAaC,OAAO,CAAC;gBAE1CL,gBAAgBG;gBAEhB,IAAI,CAACA,YAAY;oBACfC,aAAaI,UAAU,CAAC;oBACxBJ,aAAaI,UAAU,CAAC;oBACxB;gBACF;gBAEA,IAAIF,eAAe,WAAWA,eAAe,aAAaA,eAAe,UAAU;oBACjFV,aAAaU;gBACf;gBAEA,IAAIC,gBAAgBA,aAAaE,IAAI,GAAGC,MAAM,GAAG,GAAG;oBAClDZ,eAAeS;gBACjB;YACF,SAAU;gBACRL,aAAa;YACf;QACF;iCAAG,EAAE;IAEL,MAAMS,UAAU,CAACC;QACfhB,aAAagB;QACbR,aAAaS,OAAO,CAAC,gBAAgBD;IACvC;IAEA,MAAME,YAAY,CAACC;QACjBjB,eAAeiB;QACfX,aAAaS,OAAO,CAAC,kBAAkBE;IACzC;IAEA,MAAMC,gBAAgB,CAACb;QACrBH,gBAAgBG;QAChBC,aAAaS,OAAO,CAAC,sBAAsBV,aAAa,SAAS;QAEjE,IAAI,CAACA,YAAY;YACfP,aAAa;YACbE,eAAe;YACfM,aAAaI,UAAU,CAAC;YACxBJ,aAAaI,UAAU,CAAC;QAC1B;IACF;IAEA,MAAMS,SAAS;QACbrB,aAAa;QACbE,eAAe;QACfM,aAAaI,UAAU,CAAC;QACxBJ,aAAaI,UAAU,CAAC;IAC1B;IAEA,MAAMU,OAAO,IAAA,wKAAO;sCAAC,IAAM,CAAC;gBAC1BvB;gBACAE;gBACAI;gBACAF;gBACAoB,iBAAiBC,QAAQzB,QAAQE;gBACjCc;gBACAG;gBACAE;gBACAC;YACF,CAAC;qCAAG;QAACtB;QAAME;QAAQI;QAAWF;KAAa;IAE3C,qBAAO,6LAACR,YAAY8B,QAAQ;QAACC,OAAOJ;kBAAOxB;;;;;;AAC7C;GA1EgBD;KAAAA;AA4ET,SAAS8B;;IACd,MAAMC,UAAU,IAAA,2KAAU,EAACjC;IAC3B,IAAIiC,YAAYhC,WAAW;QACzB,MAAM,IAAIiC,MAAM;IAClB;IACA,OAAOD;AACT;IANgBD"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatDate(date: Date | string) {\r\n  return new Intl.DateTimeFormat('en-GB', {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    year: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(new Date(date));\r\n}\r\n"],"names":["cn","inputs","formatDate","date","Intl","DateTimeFormat","day","month","year","hour","minute","format","Date"],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAASA,GAAG,GAAGC,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAACA;AACtB;AAEO,SAASC,WAAWC,IAAmB;IAC5C,OAAO,IAAIC,KAAKC,cAAc,CAAC,SAAS;QACtCC,KAAK;QACLC,OAAO;QACPC,MAAM;QACNC,MAAM;QACNC,QAAQ;IACV,GAAGC,MAAM,CAAC,IAAIC,KAAKT;AACrB"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/app/providers.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactNode, createContext, useContext, useEffect, useMemo, useState } from 'react';\r\n\r\ntype Theme = 'light' | 'dark';\r\ntype ThemeMode = Theme;\r\n\r\ntype ThemeContextValue = {\r\n  theme: Theme;\r\n  mode: ThemeMode;\r\n  setThemeMode: (mode: ThemeMode) => void;\r\n  cycleThemeMode: () => void;\r\n};\r\n\r\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\r\n\r\nfunction getInitialThemeMode(): ThemeMode {\r\n  if (typeof window === 'undefined') return 'light';\r\n\r\n  const stored = window.localStorage.getItem('theme');\r\n  if (stored === 'light' || stored === 'dark') return stored;\r\n\r\n  return 'light';\r\n}\r\n\r\nfunction applyTheme(theme: Theme) {\r\n  if (typeof document === 'undefined') return;\r\n  document.documentElement.classList.toggle('dark', theme === 'dark');\r\n  document.documentElement.style.colorScheme = theme;\r\n}\r\n\r\nexport function Providers({ children }: { children: ReactNode }) {\r\n  const [queryClient] = useState(() => new QueryClient({\r\n    defaultOptions: {\r\n      queries: {\r\n        staleTime: 1000 * 60 * 5, // 5 minutes\r\n      },\r\n    },\r\n  }));\r\n  const [mode, setMode] = useState<ThemeMode>('light');\r\n  const [theme, setTheme] = useState<Theme>('light');\r\n\r\n  useEffect(() => {\r\n    const initialMode = getInitialThemeMode();\r\n    setMode(initialMode);\r\n    setTheme(initialMode);\r\n    applyTheme(initialMode);\r\n  }, []);\r\n\r\n  const setThemeMode = (nextMode: ThemeMode) => {\r\n    setMode(nextMode);\r\n    setTheme(nextMode);\r\n    if (typeof window !== 'undefined') {\r\n      window.localStorage.setItem('theme', nextMode);\r\n    }\r\n    applyTheme(nextMode);\r\n  };\r\n\r\n  const value = useMemo<ThemeContextValue>(() => ({\r\n    theme,\r\n    mode,\r\n    setThemeMode,\r\n    cycleThemeMode: () => {\r\n      const order: ThemeMode[] = ['light', 'dark'];\r\n      const next = order[(order.indexOf(mode) + 1) % order.length];\r\n      setThemeMode(next);\r\n    },\r\n  }), [theme, mode]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={value}>\r\n      <QueryClientProvider client={queryClient}>\r\n        {children}\r\n      </QueryClientProvider>\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within Providers');\r\n  }\r\n  return context;\r\n}\r\n"],"names":["ThemeContext","undefined","getInitialThemeMode","stored","window","localStorage","getItem","applyTheme","theme","document","documentElement","classList","toggle","style","colorScheme","Providers","children","queryClient","defaultOptions","queries","staleTime","mode","setMode","setTheme","initialMode","setThemeMode","nextMode","setItem","value","cycleThemeMode","order","next","indexOf","length","Provider","client","useTheme","context","Error"],"mappings":";;;;;;;AAEA;AAAA;AACA;;;AAHA;;;AAeA,MAAMA,6BAAe,IAAA,8KAAa,EAAgCC;AAElE,SAASC;IACP;;IAEA,MAAMC,SAASC,OAAOC,YAAY,CAACC,OAAO,CAAC;IAC3C,IAAIH,WAAW,WAAWA,WAAW,QAAQ,OAAOA;IAEpD,OAAO;AACT;AAEA,SAASI,WAAWC,KAAY;IAC9B,IAAI,OAAOC,aAAa,aAAa;IACrCA,SAASC,eAAe,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQJ,UAAU;IAC5DC,SAASC,eAAe,CAACG,KAAK,CAACC,WAAW,GAAGN;AAC/C;AAEO,SAASO,UAAU,EAAEC,QAAQ,EAA2B;;IAC7D,MAAM,CAACC,YAAY,GAAG,IAAA,yKAAQ;8BAAC,IAAM,IAAI,+LAAW,CAAC;gBACnDC,gBAAgB;oBACdC,SAAS;wBACPC,WAAW,OAAO,KAAK;oBACzB;gBACF;YACF;;IACA,MAAM,CAACC,MAAMC,QAAQ,GAAG,IAAA,yKAAQ,EAAY;IAC5C,MAAM,CAACd,OAAOe,SAAS,GAAG,IAAA,yKAAQ,EAAQ;IAE1C,IAAA,0KAAS;+BAAC;YACR,MAAMC,cAActB;YACpBoB,QAAQE;YACRD,SAASC;YACTjB,WAAWiB;QACb;8BAAG,EAAE;IAEL,MAAMC,eAAe,CAACC;QACpBJ,QAAQI;QACRH,SAASG;QACT,wCAAmC;YACjCtB,OAAOC,YAAY,CAACsB,OAAO,CAAC,SAASD;QACvC;QACAnB,WAAWmB;IACb;IAEA,MAAME,QAAQ,IAAA,wKAAO;oCAAoB,IAAM,CAAC;gBAC9CpB;gBACAa;gBACAI;gBACAI,cAAc;gDAAE;wBACd,MAAMC,QAAqB;4BAAC;4BAAS;yBAAO;wBAC5C,MAAMC,OAAOD,KAAK,CAAC,CAACA,MAAME,OAAO,CAACX,QAAQ,CAAC,IAAIS,MAAMG,MAAM,CAAC;wBAC5DR,aAAaM;oBACf;;YACF,CAAC;mCAAG;QAACvB;QAAOa;KAAK;IAEjB,qBACE,6LAACrB,aAAakC,QAAQ;QAACN,OAAOA;kBAC5B,cAAA,6LAAC,gNAAmB;YAACO,QAAQlB;sBAC1BD;;;;;;;;;;;AAIT;GA7CgBD;KAAAA;AA+CT,SAASqB;;IACd,MAAMC,UAAU,IAAA,2KAAU,EAACrC;IAC3B,IAAI,CAACqC,SAAS;QACZ,MAAM,IAAIC,MAAM;IAClB;IACA,OAAOD;AACT;IANgBD"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/lib/store/outbox.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\ninterface OutboxState {\r\n  isSyncing: boolean;\r\n  pendingCount: number;\r\n  setSyncing: (status: boolean) => void;\r\n  setPendingCount: (count: number) => void;\r\n}\r\n\r\nexport const useOutboxStore = create<OutboxState>((set) => ({\r\n  isSyncing: false,\r\n  pendingCount: 0,\r\n  setSyncing: (status) => set({ isSyncing: status }),\r\n  setPendingCount: (count) => set({ pendingCount: count }),\r\n}));\r\n"],"names":["useOutboxStore","set","isSyncing","pendingCount","setSyncing","status","setPendingCount","count"],"mappings":";;;;AAAA;;AASO,MAAMA,iBAAiB,IAAA,qJAAM,EAAc,CAACC,MAAQ,CAAC;QAC1DC,WAAW;QACXC,cAAc;QACdC,YAAY,CAACC,SAAWJ,IAAI;gBAAEC,WAAWG;YAAO;QAChDC,iBAAiB,CAACC,QAAUN,IAAI;gBAAEE,cAAcI;YAAM;IACxD,CAAC"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/farm_hands/src/components/layout/navigation-shell.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from './auth-provider';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { cn } from '@/lib/utils';\r\nimport { useTheme } from '@/app/providers';\r\nimport { \r\n  HomeIcon, \r\n  CheckCircleIcon, \r\n  BanknotesIcon, \r\n  ClipboardDocumentCheckIcon,\r\n  SignalIcon,\r\n  ShoppingCartIcon,\r\n  CreditCardIcon,\r\n  CalendarDaysIcon,\r\n  ChartBarIcon,\r\n  BellAlertIcon,\r\n  BuildingStorefrontIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { useOutboxStore } from '@/lib/store/outbox';\r\n\r\nexport function NavigationShell({ children }: { children: React.ReactNode }) {\r\n  const { role, setRole, isLoading, isAuthenticated, isRegistered, logout } = useAuth();\r\n  const { mode, setThemeMode } = useTheme();\r\n  const [controlsOpen, setControlsOpen] = useState(false);\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const pendingCount = useOutboxStore((state) => state.pendingCount);\r\n  const isStandaloneRoute = pathname === '/register' || pathname === '/login';\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await fetch('/api/auth/logout', { method: 'POST' });\r\n    } catch {\r\n    }\r\n\r\n    logout();\r\n    setControlsOpen(false);\r\n    router.replace('/login');\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isLoading) return;\r\n\r\n    if (!isAuthenticated) {\r\n      if (isStandaloneRoute) {\r\n        return;\r\n      }\r\n\r\n      const target = isRegistered ? '/login' : '/register';\r\n      if (pathname !== target) {\r\n        router.replace(target);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (isAuthenticated && isStandaloneRoute) {\r\n      router.replace('/');\r\n    }\r\n  }, [isAuthenticated, isLoading, isRegistered, isStandaloneRoute, pathname, router]);\r\n\r\n  const navItems = [\r\n    { name: 'Home', href: '/', icon: HomeIcon, roles: ['OWNER', 'MANAGER', 'WORKER'] },\r\n    { name: 'Tasks', href: '/tasks', icon: CheckCircleIcon, roles: ['MANAGER', 'WORKER'] },\r\n    { name: 'Finance', href: '/finance', icon: BanknotesIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Updates', href: '/updates', icon: CalendarDaysIcon, roles: ['OWNER', 'MANAGER', 'WORKER'] },\r\n    { name: 'Digest', href: '/digest', icon: ChartBarIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Procure', href: '/procurement', icon: ShoppingCartIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Payroll', href: '/payroll', icon: CreditCardIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Monitor', href: '/monitoring', icon: BellAlertIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Incident', href: '/incidents', icon: BellAlertIcon, roles: ['OWNER', 'MANAGER', 'WORKER'] },\r\n    { name: 'Vendor', href: '/vendor', icon: BuildingStorefrontIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Audits', href: '/audits', icon: ClipboardDocumentCheckIcon, roles: ['OWNER', 'MANAGER'] },\r\n    { name: 'Offline', href: '/offline', icon: SignalIcon, roles: ['OWNER', 'MANAGER', 'WORKER'], badge: pendingCount },\r\n  ];\r\n\r\n  const filteredNav = navItems.filter((item) => item.roles.includes(role!));\r\n\r\n  const routeRules: Array<{ prefix: string; roles: string[] }> = [\r\n    { prefix: '/finance', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/procurement', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/payroll', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/digest', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/audits', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/vendor', roles: ['OWNER', 'MANAGER'] },\r\n    { prefix: '/tasks', roles: ['MANAGER', 'WORKER'] },\r\n  ];\r\n\r\n  const matchedRule = routeRules.find((rule) => pathname.startsWith(rule.prefix));\r\n  const hasRouteAccess = !matchedRule || matchedRule.roles.includes(role || '');\r\n\r\n  if (isLoading) {\r\n    return <div className=\"min-h-screen bg-background text-foreground\" />;\r\n  }\r\n\r\n  if (!isAuthenticated && !isStandaloneRoute) {\r\n    return <div className=\"min-h-screen bg-background text-foreground\" />;\r\n  }\r\n\r\n  if (isStandaloneRoute) {\r\n    return <div className=\"min-h-screen bg-background text-foreground\">{children}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-background text-foreground\">\r\n      <aside className=\"hidden md:flex md:w-64 md:flex-col md:border-r md:bg-background/60 md:backdrop-blur-sm\">\r\n        <div className=\"p-4 border-b\">\r\n          <h1 className=\"text-lg font-bold\">FarmOps</h1>\r\n          <p className=\"text-xs text-muted-foreground uppercase\">{role} workspace</p>\r\n        </div>\r\n        <nav className=\"p-3 space-y-1 overflow-y-auto\">\r\n          {filteredNav.map((item) => (\r\n            <Link\r\n              key={item.name}\r\n              href={item.href}\r\n              className={cn(\r\n                'flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors',\r\n                pathname === item.href ? 'bg-accent text-foreground' : 'text-muted-foreground hover:bg-accent/60'\r\n              )}\r\n            >\r\n              <div className=\"relative\">\r\n                <item.icon className=\"h-5 w-5\" />\r\n                {item.badge && item.badge > 0 && (\r\n                  <span className=\"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] text-destructive-foreground\">\r\n                    {item.badge}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <span>{item.name}</span>\r\n            </Link>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => void handleLogout()}\r\n            className=\"w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors text-muted-foreground hover:bg-accent/60\"\r\n          >\r\n            <span>Logout</span>\r\n          </button>\r\n        </nav>\r\n      </aside>\r\n\r\n      <div className=\"flex-1 flex flex-col min-w-0\">\r\n      <button\r\n        onClick={() => setControlsOpen((current) => !current)}\r\n        className=\"fixed top-3 right-3 z-50 h-10 rounded-full border bg-background/90 backdrop-blur px-3 text-[10px] font-semibold uppercase md:hidden\"\r\n        aria-expanded={controlsOpen}\r\n      >\r\n        Controls\r\n      </button>\r\n\r\n      {controlsOpen ? (\r\n        <div className=\"fixed top-14 right-3 z-50 w-[min(92vw,320px)] rounded-xl border bg-background/95 backdrop-blur p-3 space-y-3 md:hidden\">\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-[10px] uppercase text-muted-foreground font-semibold\">Theme</p>\r\n            <div className=\"h-10 rounded-full border bg-background/90 p-1 flex items-center gap-1\">\r\n              {(['light', 'dark'] as const).map((themeMode) => {\r\n                const isActive = mode === themeMode;\r\n                return (\r\n                  <button\r\n                    key={themeMode}\r\n                    onClick={() => {\r\n                      setThemeMode(themeMode);\r\n                      setControlsOpen(false);\r\n                    }}\r\n                    className={cn(\r\n                      'h-8 px-2.5 rounded-full text-[10px] font-semibold uppercase transition-colors',\r\n                      isActive\r\n                        ? 'bg-primary text-primary-foreground'\r\n                        : 'text-muted-foreground hover:bg-accent'\r\n                    )}\r\n                    aria-pressed={isActive}\r\n                    title={`Set theme: ${themeMode}`}\r\n                  >\r\n                    {themeMode}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-1\">\r\n            <p className=\"text-[10px] uppercase text-muted-foreground font-semibold\">Role</p>\r\n            <div className=\"h-10 rounded-full border bg-background/90 px-2 flex items-center gap-1\">\r\n              {(['OWNER', 'MANAGER', 'WORKER'] as const).map((r) => {\r\n                const isActive = role === r;\r\n                return (\r\n                  <button\r\n                    key={r}\r\n                    onClick={() => {\r\n                      setRole(r);\r\n                      setControlsOpen(false);\r\n                    }}\r\n                    className={cn(\r\n                      'h-8 px-2.5 rounded-full text-[10px] font-semibold uppercase transition-colors',\r\n                      isActive\r\n                        ? 'bg-primary text-primary-foreground'\r\n                        : 'text-muted-foreground hover:bg-accent'\r\n                    )}\r\n                    aria-pressed={isActive}\r\n                    title={`Switch role: ${r}`}\r\n                  >\r\n                    {r}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => void handleLogout()}\r\n            className=\"h-10 w-full rounded-md border bg-background/90 text-[11px] font-semibold uppercase text-muted-foreground hover:bg-accent\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      ) : null}\r\n\r\n      <div\r\n        className=\"fixed top-3 right-3 z-50 h-10 rounded-full border bg-background/90 backdrop-blur p-1 hidden md:flex items-center gap-1\"\r\n        role=\"group\"\r\n        aria-label=\"Theme mode selector\"\r\n      >\r\n        {(['light', 'dark'] as const).map((themeMode) => {\r\n          const isActive = mode === themeMode;\r\n          return (\r\n            <button\r\n              key={themeMode}\r\n              onClick={() => setThemeMode(themeMode)}\r\n              className={cn(\r\n                'h-8 px-2.5 rounded-full text-[10px] font-semibold uppercase transition-colors',\r\n                isActive\r\n                  ? 'bg-primary text-primary-foreground'\r\n                  : 'text-muted-foreground hover:bg-accent'\r\n              )}\r\n              aria-pressed={isActive}\r\n              title={`Set theme: ${themeMode}`}\r\n            >\r\n              {themeMode}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"fixed top-14 right-3 z-50 h-10 rounded-full border bg-background/90 backdrop-blur px-2 hidden md:flex items-center gap-1\">\r\n        {(['OWNER', 'MANAGER', 'WORKER'] as const).map((r) => {\r\n          const isActive = role === r;\r\n          return (\r\n            <button\r\n              key={r}\r\n              onClick={() => setRole(r)}\r\n              className={cn(\r\n                'h-8 px-2.5 rounded-full text-[10px] font-semibold uppercase transition-colors',\r\n                isActive\r\n                  ? 'bg-primary text-primary-foreground'\r\n                  : 'text-muted-foreground hover:bg-accent'\r\n              )}\r\n              aria-pressed={isActive}\r\n              title={`Switch role: ${r}`}\r\n            >\r\n              {r}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      <main className=\"flex-1 pt-16 md:pt-0 pb-20 md:pb-8\">\r\n        {hasRouteAccess ? (\r\n          children\r\n        ) : (\r\n          <div className=\"p-8 max-w-3xl mx-auto w-full space-y-3\">\r\n            <h1 className=\"text-xl font-bold\">Access Restricted</h1>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Current role does not have access to this module. Switch role from the selector in the top-right to preview authorized surfaces.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </main>\r\n      \r\n      {/* Mobile Bottom Navigation */}\r\n      <nav className=\"fixed bottom-0 left-0 right-0 border-t bg-background/80 backdrop-blur-md px-2 py-2 md:hidden\">\r\n        <div className=\"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-background/95 to-transparent\" />\r\n        <div className=\"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-background/95 to-transparent\" />\r\n        <ul className=\"flex items-center gap-1 overflow-x-auto whitespace-nowrap no-scrollbar px-1\">\r\n          {filteredNav.map((item) => (\r\n            <li key={item.name} className=\"shrink-0\">\r\n              <Link\r\n                href={item.href}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-1 p-2 min-w-16 text-xs font-medium transition-colors\",\r\n                  pathname === item.href ? \"text-primary\" : \"text-muted-foreground\"\r\n                )}\r\n              >\r\n                <div className=\"relative\">\r\n                  <item.icon className=\"h-6 w-6\" />\r\n                  {item.badge && item.badge > 0 && (\r\n                    <span className=\"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] text-destructive-foreground\">\r\n                      {item.badge}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                {item.name}\r\n              </Link>\r\n            </li>\r\n          ))}\r\n          <li className=\"shrink-0\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => void handleLogout()}\r\n              className=\"flex flex-col items-center gap-1 p-2 min-w-16 text-xs font-medium transition-colors text-muted-foreground\"\r\n            >\r\n              <span className=\"h-6 w-6 inline-flex items-center justify-center\">âŽ‹</span>\r\n              Logout\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["NavigationShell","children","role","setRole","isLoading","isAuthenticated","isRegistered","logout","mode","setThemeMode","controlsOpen","setControlsOpen","router","pathname","pendingCount","state","isStandaloneRoute","handleLogout","fetch","method","replace","target","navItems","name","href","icon","roles","badge","filteredNav","filter","item","includes","routeRules","prefix","matchedRule","find","rule","startsWith","hasRouteAccess","className","map","type","onClick","current","themeMode","isActive","title","r"],"mappings":"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"}}]
}